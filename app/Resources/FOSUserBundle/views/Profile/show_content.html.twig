{% trans_default_domain 'FOSUserBundle' %}

<div class="container">

    <div class="row">

        <div class="col-md-4 fos_user_user_show profile__info">
            <h4> Espace abonné :</h4>
            <p><b>Login:</b> {{ user.username }}</p>
            <p><b>Email:</b> {{ user.email }}</p>
            <p> <a href="{{ path('fos_user_security_logout') }}">Se deconnecter</a></p>
        </div>

        <div class="col-md-1"></div>

        <div class="col-md-7 profile__notification">

            <div class="row row__sendMessage">
                <div class="col-md-5">
                    <h4>Décrypter un message :</h4>
                </div>
                {{ form_start(decryptForm) }}
                <div class="col-md-7 decrypt__zone">
                    <div class="input-group">
                        <span class="input-group-addon" id="basic-addon1">ID :</span>
                        {{ form_widget(decryptForm.id, {'attr': {'value' : '1', 'class' : 'form-control input__id', 'aria-describedby':'basic-addon1'}}) }}
                        <span class="input-group-addon" id="basic-addon2">Sel :</span>
                        {{ form_widget(decryptForm.sel, {'attr': {'class' : 'form-control input__sel', 'aria-describedby':'basic-addon2'}}) }}
                        {{ form_widget(decryptForm.save, {'label': 'Décrypter', 'attr': {'class' : 'input__save'}}) }}
                    </div>
                </div>
                {{ form_end(decryptForm) }}
            </div>

            <div class="row row__seeMessage">
                <div class="col-md-12">
                    <h4> Mes messages :</h4>
                    <table>
                        <tr>
                            <th>ID :</th>
                            <th>Auteur :</th>
                            <th>Messages :</th>
                        </tr>
                        </thead>

                        <tbody>

                        {% for message in messages|reverse %}
                            {% if loop.index < 10 %}
                                <tr>
                                    <td>{{ message.id }}</td>
                                    <td>{{ message.auteur|capitalize }}</td>
                                    <td class="td__message" onclick="putIdValue({{ message.id }})">{{ message.message[:73] }}</td>
                                </tr>
                            {% else %}
                            {% endif %}
                        {% endfor %}

                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>

    <div class="row">
        <div class="col-md-offset-5 col-md-7 profile__zoneTexte">

            <h4> Nouveau message :</h4>
            {% for flashMessage in app.session.flashbag.get('notice') %}
                <div class="flash-notice alert alert-success" role="alert">
                    {{ flashMessage }}
                </div>
            {% endfor %}
            {{ form_start(form) }}
            <div class="hidden">
                {{ form_widget(form.auteur, {'value' : user.username})  }}
            </div>
            {{ form_widget(form.message, {'attr': {'class' : 'form-control', 'rows':'3', 'placeholder':'Crypt Your Octet ...', 'maxlength':'255'}}) }}
            <div class="input-group form__destinataire">
                <span class="input-group-addon" id="basic-addon1">@</span>
                {{ form_widget(form.destinataire, {'attr': {'class' : 'form-control', 'aria-describedby':'basic-addon1', 'placeholder':'Destinataire'}}) }}
                                                    <!--Attribution de class en twig-->
            </div>

            {{ form_widget(form.save, { 'label': 'Envoyer', 'attr': {'class' : 'btn btn-primary btn-send center'}}) }}

            {{ form_end(form) }}
        </div>

    </div>
    </div>